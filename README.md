# armonica-sensor

## 全体目標
- 体験者がデバイスの金属棒に触れていることを、抵抗値の変化から検出したい。そのために、抵抗値を、適切に分圧された電圧として測定し、A/D 変換後に、シリアル通信で PC 側に送信する。
- 接触抵抗値は、人によって異なるため、操作開始時に「スタートボタン」を押してもらい、その時の接触抵抗を測定して基準値とする。
- スタートボタンによる操作は、アプリ側でも使用するため、「スタートボタンの状態」と「測定した電圧」の両方を送信する。 **受信側で、「スタートボタンが押されたときの測定値」を保存し、基準値とすること！**

## 送信データ
- 9600 baud
- １行に２個の整数値のスペース区切りテキスト表記。１個めはスイッチの状態 `[0|1]` ２個めは符号なし整数値（最大 `1024`）　（例： `0 123` `1 1000` `1 7`）
- 10 サンプル／秒（暫定）

## 使用デバイス
- ESP-WROOM02 評価キット ESPr Developer https://www.switch-science.com/products/2500

## 開発環境
- Arduino IDE 2.0 https://docs.arduino.cc/software/ide-v2

## 詳細開発項目
- [x] 1V 以下の電圧の生成（ WROOM02 の A/D 変換入力が max 1.0V のため）
- [x] 体験者と金属棒の間の接触抵抗を測定するための分圧回路（実測でおよそ１〜２ＧΩ）
- [x] 入力インピーダンスを上げるためのボルテージフォロワ
- [x] WROOM02 の A/D 変換プログラム
- [ ] 「スタートボタン」の接続と状態検出プログラム
- [x] WROOM02 のシリアル送信プログラム

